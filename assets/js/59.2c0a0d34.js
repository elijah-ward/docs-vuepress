(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{514:function(e,t,a){"use strict";a.r(t);var i=a(0),n=Object(i.a)({},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"email-settings"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#email-settings","aria-hidden":"true"}},[e._v("#")]),e._v(" Email Settings")]),e._v(" "),a("p",[e._v("This document describes how to configure Rundeck for email\nsupport.\nEmail settings are located in the rundeck-config.properties file. Depending on the installer used, the configuration files will be under a base directory:")]),e._v(" "),a("ul",[a("li",[e._v("RPM/DEB: /etc/rundeck/rundeck-config.properties")]),e._v(" "),a("li",[e._v("Launcher: $RDECK_BASE/server/config/rundeck-config.properties")])]),e._v(" "),a("p",[e._v("Refer to the appropriate configuration file paths from [Configuration -> Configuration Layout](/administration/configuration/config-file-reference.md#configuration-layout] to locate the Rundeck configuration paths depending on your install.")]),e._v(" "),a("h2",{attrs:{id:"smtp-server-settings"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#smtp-server-settings","aria-hidden":"true"}},[e._v("#")]),e._v(" SMTP server settings")]),e._v(" "),a("p",[e._v("By default the plugin assumes an unsecured mail server configured at localhost on port 25.\nYou can specify your own with these settings:")]),e._v(" "),a("pre",[a("code",[e._v("grails.mail.host=localhost\ngrails.mail.port=25\n")])]),e._v(" "),a("p",[e._v("To add authentication:")]),e._v(" "),a("pre",[a("code",[e._v("grails.mail.username=user\ngrails.mail.password=pass\n")])]),e._v(" "),a("h3",{attrs:{id:"advanced-smtp-settings"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#advanced-smtp-settings","aria-hidden":"true"}},[e._v("#")]),e._v(" Advanced SMTP settings")]),e._v(" "),a("p",[e._v("If you need more advanced configuration (e.g., authenticated and secured over SSL),\nsee the grails Mail plugin configuration:\n"),a("a",{attrs:{href:"https://gpc.github.io/grails-mail/guide/2.%20Configuration.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Grails Mail Configuration"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("The caveat for using this is that in our experience it requires using a .groovy formatted configuration file to support the extended configuration properties.")]),e._v(" "),a("p",[e._v("See [Groovy config format](/administration/configuration/config-file-reference.md#groovy-config-format].")]),e._v(" "),a("h2",{attrs:{id:"notification-email-settings"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#notification-email-settings","aria-hidden":"true"}},[e._v("#")]),e._v(" Notification email settings")]),e._v(" "),a("p",[e._v("The URL and From: address used in [Job email notifications](/manual/creating-jobs.md#job-notifications] are managed via the settings located in the rundeck-config.properties file.")]),e._v(" "),a("p",[e._v("The two properties are:")]),e._v(" "),a("ul",[a("li",[e._v("grails.serverURL")]),e._v(" "),a("li",[e._v("grails.mail.default.from")])]),e._v(" "),a("p",[e._v("Here's an example:")]),e._v(" "),a("pre",[a("code",[e._v("grails.serverURL=https://node.fully.qualified.domain.name:4443\ngrails.mail.default.from=deployer@domain.com\n")])]),e._v(" "),a("h3",{attrs:{id:"custom-email-templates"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#custom-email-templates","aria-hidden":"true"}},[e._v("#")]),e._v(" Custom Email Templates")]),e._v(" "),a("p",[e._v("You can define these properties to customize the email notifications. Each property can be defined for a specific Trigger, or for the general case. Available triggers are: "),a("code",[e._v("success")]),e._v(","),a("code",[e._v("failure")]),e._v(", and "),a("code",[e._v("start")]),e._v(". In addition, you can have custom settings for a project and job name combination as well:")]),e._v(" "),a("pre",[a("code",[e._v("# trigger-specific templating\nrundeck.mail.[trigger].template.subject=[custom subject line]\nrundeck.mail.[trigger].template.file=[path to template file]\nrundeck.mail.[trigger].template.log.formatted=true/false (if true, prefix log lines with context information)\n\n# project and job specific\nrundeck.mail.[project].[jobname].template.subject=[custom subject line]\nrundeck.mail.[project].[jobname].template.file=[path to template file]\nrundeck.mail.[project].[jobname].template.log.formatted=true/false (if true, prefix log lines with context information)\n\n# apply to any triggers not specified\nrundeck.mail.template.subject=[Default subject line]\nrundeck.mail.template.file=[path to template file]\nrundeck.mail.template.log.formatted=true/false (if true, prefix log lines with context information)\n")])]),e._v(" "),a("p",[e._v("If a template filepath ends with "),a("code",[e._v(".md")]),e._v(" or "),a("code",[e._v(".markdown")]),e._v(", then it will be interpreted as a Markdown formatted template. Otherwise it is expected that the template file contains HTML.")]),e._v(" "),a("p",[e._v("The Subject line, filepath, and file contents can all contain embedded property references of the form "),a("code",[e._v("${group.key}")]),e._v(". The available properties are mostly the same as those available for Notification Plugins, including the "),a("code",[e._v("execution.*")]),e._v(" and "),a("code",[e._v("job.*")]),e._v(" values. See (/developer/05-notification-plugins.md#execution-data).")]),e._v(" "),a("p",[e._v('The "Context Variables" values used within the execution are available just as they are in the execution, so options would be available as '),a("code",[e._v("${option.name}")]),e._v(".")]),e._v(" "),a("p",[e._v("In addition these properties are defined:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("rundeck.href")]),e._v(": URL to the Rundeck server")]),e._v(" "),a("li",[a("code",[e._v("notification.trigger")]),e._v(": Trigger name")]),e._v(" "),a("li",[a("code",[e._v("notification.eventStatus")]),e._v(': A string indicating the combination of execution status, and notification trigger, suitable for an email subject line, such as "KILLED", "FAILURE", "STARTING", "SUCCESS".')]),e._v(" "),a("li",[a("code",[e._v("execution.projectHref")]),e._v(": URL to the Project within Rundeck.")])]),e._v(" "),a("h4",{attrs:{id:"custom-attached-log-output-file"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#custom-attached-log-output-file","aria-hidden":"true"}},[e._v("#")]),e._v(" Custom Attached Log Output file")]),e._v(" "),a("p",[e._v("When the log output is attached as a file, the file's extension can be defined by adding new settings on rudeck-config.properties.\nFor example:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("rundeck.mail.template.log.extension=html\nrundeck.mail.template.log.contentType=text/html\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("rundeck.mail.<PROJECT>.<JOBNAME>.template.log.extension=csv\nrundeck.mail.<PROJECT>.<JOBNAME>.template.log.contentType=text/csv\n")])])]),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("rundeck.mail.<TRIGGER>.template.log.extension=html\nrundeck.mail.<TRIGGER>.template.log.contentType=text/html\n")])])]),a("h2",{attrs:{id:"troubleshooting"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#troubleshooting","aria-hidden":"true"}},[e._v("#")]),e._v(" Troubleshooting")]),e._v(" "),a("p",[e._v("See the [service.log](/administration/maintenance/logs.md#service.log] for mail error messages.")])])},[],!1,null,null,null);t.default=n.exports}}]);