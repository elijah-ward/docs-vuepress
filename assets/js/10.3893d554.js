(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{279:function(e,t,a){"use strict";a.r(t);var r=a(0),s=Object(r.a)({},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"aws"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#aws","aria-hidden":"true"}},[e._v("#")]),e._v(" AWS")]),e._v(" "),a("p",[e._v("This document provides instructions to install Rundeck Enterprise in an HA (cluster) configuration on AWS, taking advantage of ELB, RDS, and S3 for scale and availability.")]),e._v(" "),a("p",[a("img",{attrs:{src:"/figures/aws-architecture.png",alt:"Rundeck Enterprise HA architecture on AWS"}})]),e._v(" "),a("h2",{attrs:{id:"aws-setup"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#aws-setup","aria-hidden":"true"}},[e._v("#")]),e._v(" AWS Setup")]),e._v(" "),a("p",[e._v("This section describes the AWS environment setup needed before the Rundeck software can be installed.")]),e._v(" "),a("h3",{attrs:{id:"key-pair"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#key-pair","aria-hidden":"true"}},[e._v("#")]),e._v(" Key Pair")]),e._v(" "),a("p",[e._v("Create a key pair to access the Rundeck Enterprise EC2 instances, rundeckpro-ec2user. This key pair will be specified when it is time to launch the EC2 instances later on. This is also the key pair used to ssh to the EC2 instances.")]),e._v(" "),a("ul",[a("li",[e._v("Open the Amazon EC2 console at: "),a("a",{attrs:{href:"https://console.aws.amazon.com/ec2/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://console.aws.amazon.com/ec2/"),a("OutboundLink")],1)]),e._v(" "),a("li",[e._v("Go to navigation panel of the AWS console, under NETWORK & SECURITY, choose Key Pairs.")]),e._v(" "),a("li",[e._v("Add the new key pair.")])]),e._v(" "),a("p",[e._v("For further information, see "),a("a",{attrs:{href:"http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html#having-ec2-create-your-key-pair",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html#having-ec2-create-your-key-pair"),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"iam"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#iam","aria-hidden":"true"}},[e._v("#")]),e._v(" IAM")]),e._v(" "),a("p",[e._v("Create a Role to allow the Rundeck EC2 and S3 plugins to access AWS API so we donâ€™t have to specify access and secret key strings.")]),e._v(" "),a("ul",[a("li",[e._v("Go to the AWS Management Console and open the IAM console at "),a("a",{attrs:{href:"https://console.aws.amazon.com/iam/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://console.aws.amazon.com/iam/"),a("OutboundLink")],1)]),e._v(" "),a("li",[e._v("In the navigation pane of the console, click Roles and then click Create New Role.")]),e._v(" "),a("li",[e._v("Add the role name: rundeckpro-ec2-instance-role")]),e._v(" "),a("li",[e._v("Attach the following policies: AmazonS3FullAccess, AmazonEc2ReadOnlyAccess")])]),e._v(" "),a("p",[a("img",{attrs:{src:"/figures/aws-iam.png",alt:""}}),e._v(" "),a("img",{attrs:{src:"/figures/aws-iam-policy1.png",alt:""}}),e._v(" "),a("img",{attrs:{src:"/figures/aws-iam-policy2.png",alt:""}})]),e._v(" "),a("p",[e._v("For further information, see "),a("a",{attrs:{href:"http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html#having-ec2-create-your-key-pair",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html#having-ec2-create-your-key-pair"),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"security-groups"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#security-groups","aria-hidden":"true"}},[e._v("#")]),e._v(" Security Groups")]),e._v(" "),a("p",[e._v("Several security groups are defined to manage network access between the layers of the Enterprise environment (ELB->RUNDECK-RDS).")]),e._v(" "),a("ul",[a("li",[e._v("Open the Amazon EC2 console at "),a("a",{attrs:{href:"https://console.aws.amazon.com/ec2/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://console.aws.amazon.com/ec2/"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("li",[e._v("In the navigation pane, choose Security Groups.")]),e._v(" "),a("li",[e._v("Choose Create Security Group.")])]),e._v(" "),a("p",[a("img",{attrs:{src:"/figures/aws-sg.png",alt:""}})]),e._v(" "),a("p",[e._v("Create the follow groups:")]),e._v(" "),a("p",[a("strong",[e._v("sg:rundeck-elb")])]),e._v(" "),a("p",[e._v("inbound:")]),e._v(" "),a("ul",[a("li",[e._v("type: http, protocol TCP, port: 80, source 0.0.0.0/0")]),e._v(" "),a("li",[e._v("type: https, protocol TCP, port 443, source 0.0.0.0/0")])]),e._v(" "),a("p",[e._v("outbound:")]),e._v(" "),a("ul",[a("li",[e._v("type: all, protocol: all, port: all, destination 0.0.0.0/0")])]),e._v(" "),a("p",[a("img",{attrs:{src:"/figures/aws-sg-elb.png",alt:""}})]),e._v(" "),a("p",[a("strong",[e._v("sg:rundeck-instances")])]),e._v(" "),a("p",[e._v("inbound:")]),e._v(" "),a("ul",[a("li",[e._v("type: custom, protocol TCP, port: 4440, source sg:rundeck-elb")]),e._v(" "),a("li",[e._v("type: custom, protocol SSH, port: 20, source sg:rundeck-elb")])]),e._v(" "),a("p",[e._v("outbound:")]),e._v(" "),a("ul",[a("li",[e._v("type: all, protocol: all, port: all, destination 0.0.0.0/0")])]),e._v(" "),a("p",[a("img",{attrs:{src:"/figures/aws-sg-instances.png",alt:""}})]),e._v(" "),a("p",[a("strong",[e._v("sg:rundeck-rds")])]),e._v(" "),a("p",[e._v("inbound:")]),e._v(" "),a("ul",[a("li",[e._v("type: mysql, protocol TCP, port: 3306, source: sg-rundeck-instances")])]),e._v(" "),a("p",[a("img",{attrs:{src:"/figures/aws-sg-rds.png",alt:""}})]),e._v(" "),a("p",[e._v("For further information, see "),a("a",{attrs:{href:"http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-network-security.html#creating-security-group",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/using-network-security.html#creating-security-group"),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"s3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#s3","aria-hidden":"true"}},[e._v("#")]),e._v(" S3")]),e._v(" "),a("p",[e._v("Create a folder in the S3 bucket to store logs called rundeckpro. You will specify this folder name when the pro software is installed.")]),e._v(" "),a("p",[e._v("Go into the AWS Management Console and open the Amazon S3 console at "),a("a",{attrs:{href:"https://console.aws.amazon.com/s3",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://console.aws.amazon.com/s3"),a("OutboundLink")],1)]),e._v(" "),a("p",[a("img",{attrs:{src:"/figures/aws-s3.png",alt:""}})]),e._v(" "),a("p",[e._v("Set Policy:")]),e._v(" "),a("p",[a("img",{attrs:{src:"/figures/aws-s3-policy.png",alt:""}})]),e._v(" "),a("div",{staticClass:"language-{.json} extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('{\n    "Version": "2012-10-17",\n    "Statement": [\n        {\n            "Sid": "PublicReadGetObject",\n            "Effect": "Allow",\n            "Principal": "*",\n            "Action": "s3:GetObject",\n            "Resource": "arn:aws:s3:::rundeckpro/*"\n        }\n    ]\n}\n')])])]),a("p",[e._v("For further information, see "),a("a",{attrs:{href:"http://docs.aws.amazon.com/AmazonS3/latest/gsg/CreatingABucket.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://docs.aws.amazon.com/AmazonS3/latest/gsg/CreatingABucket.html"),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"rds"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rds","aria-hidden":"true"}},[e._v("#")]),e._v(" RDS")]),e._v(" "),a("p",[e._v('Create an RDS mysql instance, rundeck-rds and place it in the rundeck-rds security group. Specify a database named "rundeck". Note the name of the RDS hostname because it is needed for the Enterprise installation.')]),e._v(" "),a("ul",[a("li",[e._v("Go into the AWS Management Console and open the Amazon RDS console at "),a("a",{attrs:{href:"https://console.aws.amazon.com/rds",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://console.aws.amazon.com/rds"),a("OutboundLink")],1)]),e._v(" "),a("li",[e._v("In the top right corner of the AWS Management Console, select the region in which you want to create the DB instance.")]),e._v(" "),a("li",[e._v("In the navigation pane, click Instances.")]),e._v(" "),a("li",[e._v("Click Launch DB Instance to start the Launch DB Instance Wizard.")])]),e._v(" "),a("p",[a("img",{attrs:{src:"/figures/aws-rds.png",alt:""}})]),e._v(" "),a("ul",[a("li",[e._v("Complete the advanced settings:")])]),e._v(" "),a("p",[a("img",{attrs:{src:"/figures/aws-rds-advanced.png",alt:""}})]),e._v(" "),a("p",[e._v("For further information, see "),a("a",{attrs:{href:"http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_CreateInstance.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_CreateInstance.html"),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"ec2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ec2","aria-hidden":"true"}},[e._v("#")]),e._v(" EC2")]),e._v(" "),a("p",[e._v("Create two EC2 instances for the Rundeck Enterprise cluster. Specify the following when launching the instance:")]),e._v(" "),a("ul",[a("li",[e._v("Open the Amazon EC2 console at https://console.aws.amazon.com/ec2/.")]),e._v(" "),a("li",[e._v("From the console dashboard, choose Launch Instance.")]),e._v(" "),a("li",[e._v("Select the AMI image: Amazon Linux AMI 2015.03.0 x86_64 HVM GP2")])]),e._v(" "),a("p",[a("img",{attrs:{src:"/figures/aws-ec2.png",alt:""}})]),e._v(" "),a("ul",[a("li",[e._v("In the configure instance details, choose the IAM Role: rundeckpro-ec2-instance-role")])]),e._v(" "),a("p",[a("img",{attrs:{src:"/figures/aws-ec2-iam.png",alt:""}})]),e._v(" "),a("ul",[a("li",[e._v("In the configure Security-group, choose the rundeck-instances")])]),e._v(" "),a("p",[a("img",{attrs:{src:"/figures/aws-ec2-sg.png",alt:""}})]),e._v(" "),a("ul",[a("li",[e._v("Finally, add the key pair name: rundeckpro-ec2user")])]),e._v(" "),a("p",[a("img",{attrs:{src:"/figures/aws-ec2-key.png",alt:""}})]),e._v(" "),a("p",[e._v("For further information, see "),a("a",{attrs:{href:"http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EC2_GetStarted.html#ec2-launch-instance_linux",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EC2_GetStarted.html#ec2-launch-instance_linux"),a("OutboundLink")],1)]),e._v(" "),a("h3",{attrs:{id:"elb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#elb","aria-hidden":"true"}},[e._v("#")]),e._v(" ELB")]),e._v(" "),a("p",[e._v("Create the ELB called rundeckpro-ha-elb. If you defined the HTTPS listener, you must create a new SSL certificate. You will upload the SSL cert and key when defining the HTTPS listener.")]),e._v(" "),a("ul",[a("li",[e._v("Open the Amazon EC2 console at "),a("a",{attrs:{href:"https://console.aws.amazon.com/ec2/",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://console.aws.amazon.com/ec2/"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("li",[e._v("From the navigation bar, select a region for your load balancers. Be sure to select the same region that you selected for your EC2 instances.")]),e._v(" "),a("li",[e._v("In the navigation pane, under LOAD BALANCING, click Load Balancers.")]),e._v(" "),a("li",[e._v("Click Create Load Balancer.")]),e._v(" "),a("li",[e._v("Define the listeners:\n"),a("ul",[a("li",[e._v("80 (HTTP) forwarding to 4440 (HTTP)")]),e._v(" "),a("li",[e._v("443 (HTTPS, required certificate: rundeckpro-cert) forwarding to 4440 (HTTP)")])])])]),e._v(" "),a("p",[a("img",{attrs:{src:"/figures/aws-elb.png",alt:""}})]),e._v(" "),a("ul",[a("li",[e._v("Select the security group rundeck-elb")])]),e._v(" "),a("p",[a("img",{attrs:{src:"/figures/aws-elb-sg.png",alt:""}})]),e._v(" "),a("ul",[a("li",[e._v("Add the two EC2 instances to the ELB.")])]),e._v(" "),a("p",[a("img",{attrs:{src:"/figures/aws-elb-ec2.png",alt:""}})]),e._v(" "),a("ul",[a("li",[e._v("Add Stickiness: cookieName='JSESSIONID'")])]),e._v(" "),a("p",[a("img",{attrs:{src:"/figures/aws-elb-stickiness.png",alt:""}})]),e._v(" "),a("ul",[a("li",[e._v("Enable access logs: S3 Location: rdpro-logs")])]),e._v(" "),a("p",[a("img",{attrs:{src:"/figures/aws-elb-logs.png",alt:""}})])])},[],!1,null,null,null);t.default=s.exports}}]);