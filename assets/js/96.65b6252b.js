(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{441:function(e,r,t){"use strict";t.r(r);var o=t(0),a=Object(o.a)({},function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"resource-model-source-plugin"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#resource-model-source-plugin","aria-hidden":"true"}},[e._v("#")]),e._v(" Resource Model Source Plugin")]),e._v(" "),t("p",[e._v("Updated November 20, 2010")]),e._v(" "),t("h2",{attrs:{id:"about"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#about","aria-hidden":"true"}},[e._v("#")]),e._v(" About")]),e._v(" "),t("p",[e._v("Resource Model Sources provide the means to retrieve Node resources for a Project.\nYou can implement a Resource Model Source using a "),t("a",{attrs:{href:"#java-plugin-type"}},[e._v("Java Plugin Type")]),e._v("\nor a "),t("a",{attrs:{href:"#script-plugin-type"}},[e._v("Script Plugin Type")]),e._v(".")]),e._v(" "),t("h2",{attrs:{id:"plugin-configuration"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#plugin-configuration","aria-hidden":"true"}},[e._v("#")]),e._v(" Plugin configuration")]),e._v(" "),t("p",[e._v("The "),t("code",[e._v("ResourceModelSource")]),e._v(" "),t("router-link",{attrs:{to:"/developer/${javadocbase}/com/dtolabs/rundeck/core/resources/ResourceModelSource.html"}},[e._v("(javadoc)")]),e._v(" service allows the plugins to be configured via the Rundeck Web GUI. You are thus able to declare configuration properties for\nyour plugin, which will be displayed as a web form when the Project is configured, or can be manually configured in the "),t("code",[e._v("project.properties")]),e._v(" file.")],1),e._v(" "),t("h2",{attrs:{id:"java-plugin-type"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#java-plugin-type","aria-hidden":"true"}},[e._v("#")]),e._v(" Java Plugin Type")]),e._v(" "),t("p",[e._v("A ResourceModelSource provider is actually a Factory class.\nAn instance of your ResourceModelSource provider will be\nre-used, so each time a new ResourceModelSource with a new configuration is required,\nyour Factory class will be invoked to produce it.")]),e._v(" "),t("p",[e._v("Your provider class must implement the interface\n"),t("router-link",{attrs:{to:"/developer/${javadocbase}/com/dtolabs/rundeck/core/resources/ResourceModelSourceFactory.html"}},[e._v("ResourceModelSourceFactory")]),e._v(":")],1),e._v(" "),t("div",{staticClass:"language-{.java} extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("public interface ResourceModelSourceFactory {\n    /**\n     * Return a resource model source for the given configuration\n     */\n    public ResourceModelSource createResourceModelSource(Properties configuration)\n       throws ConfigurationException;\n}\n")])])]),t("h3",{attrs:{id:"plugin-properties"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#plugin-properties","aria-hidden":"true"}},[e._v("#")]),e._v(" Plugin properties")]),e._v(" "),t("p",[e._v("See "),t("router-link",{attrs:{to:"/developer/01-plugin-development.html#plugin-descriptions"}},[e._v("Plugin Development - Java Plugins - Descriptions")]),e._v("\nto learn how to create configuration properties for your ResourceModelSource plugin.")],1),e._v(" "),t("h2",{attrs:{id:"script-plugin-type"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#script-plugin-type","aria-hidden":"true"}},[e._v("#")]),e._v(" Script Plugin Type")]),e._v(" "),t("p",[e._v("See the "),t("router-link",{attrs:{to:"/developer/01-plugin-development.html#script-plugin-development"}},[e._v("Script Plugin Development")]),e._v("\nfor the basics of developing script-based plugins for Rundeck.")],1),e._v(" "),t("h3",{attrs:{id:"instance-scope-properties"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#instance-scope-properties","aria-hidden":"true"}},[e._v("#")]),e._v(" Instance scope properties")]),e._v(" "),t("p",[e._v("Instance scoped properties for ResourceModelSources are loaded from the project's Resource Model Source entries. A project can define multiple entries, and at execution time, the Instance scoped values come from those entries.")]),e._v(" "),t("h3",{attrs:{id:"example"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#example","aria-hidden":"true"}},[e._v("#")]),e._v(" Example")]),e._v(" "),t("p",[e._v("Here is an example "),t("code",[e._v("plugin.yaml")]),e._v(' script-based ResourceModelSource plugin\ndeclaring a provider called "mysource" that produces resource-format '),t("code",[e._v("resourceyaml")]),e._v(" output.\nThe provider declares three config properties (account, url, region)\nand illustrates the use\nof three different types (Integer, String, FreeSelect).")]),e._v(" "),t("p",[e._v("Example: plugin.yaml")]),e._v(" "),t("div",{staticClass:"language-{.yaml .numberLines} extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("name: My Resource Model Source\nversion: 1.0\nrundeckPluginVersion: 1.0\nauthor: alexh\ndate: 05/10/12\nproviders:\n    - name: mysource\n      service: ResourceModelSource\n      plugin-type: script\n      script-interpreter: bash -c\n      script-file: nodes.sh\n      resource-format: resourceyaml\n      config:\n        - type: Integer\n          name: account\n          title: Account\n          description: Enter the account number.\n        - type: String\n          name: url\n          title: URL\n          description: Enter the URL to the inventory service.\n        - type: FreeSelect\n          name: region\n          title: Region\n          description: Select a region.\n          required: true\n          default: east\n          values: east,north,south,west\n")])])]),t("p",[e._v("The "),t("code",[e._v("script-file")]),e._v(' entry on line 11 references a script called "nodes.sh" referencing\nthe plugin properties (see script below).')]),e._v(" "),t("p",[e._v("Example script-file: nodes.sh")]),e._v(" "),t("div",{staticClass:"language-{.bash} extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('#!/usr/bin/env bash\n\n# variables set by plugin properties:\n: ${RD_CONFIG_ACCOUNT:?"account plugin property not specified"}\n: ${RD_CONFIG_REGION:?"region plugin property not specified"}\n: ${RD_CONFIG_URL:?"url plugin property not specified"}\n\n#\n# Generate node data here.\n#\nexit $?\n')])])]),t("h3",{attrs:{id:"provider-script-requirements"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#provider-script-requirements","aria-hidden":"true"}},[e._v("#")]),e._v(" Provider Script Requirements")]),e._v(" "),t("p",[e._v("The ResourceModelSource service has expectations about the way your provider script behaves.")]),e._v(" "),t("p",[e._v("Exit code:")]),e._v(" "),t("ul",[t("li",[e._v("Exit code of 0 indicates success.")]),e._v(" "),t("li",[e._v("Any other exit code indicates failure.")])]),e._v(" "),t("p",[e._v("Script output:")]),e._v(" "),t("ul",[t("li",[e._v("All output on "),t("code",[e._v("STDOUT")]),e._v(" will be captured and passed to a\n[ResourceFormatParser](/developer/03-model-source-format-parser-generator-plugins.md#resourceformatparser] for the specified "),t("code",[e._v("resource-format")]),e._v(" to create the Node definitions.")])])])},[],!1,null,null,null);r.default=a.exports}}]);