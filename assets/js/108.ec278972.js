(window.webpackJsonp=window.webpackJsonp||[]).push([[108],{427:function(e,r,a){"use strict";a.r(r);var n=a(0),t=Object(n.a)({},function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"user-group-source-plugins"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#user-group-source-plugins","aria-hidden":"true"}},[e._v("#")]),e._v(" User Group Source Plugins")]),e._v(" "),a("p",[e._v("Updated April 15, 2019")]),e._v(" "),a("h2",{attrs:{id:"about"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#about","aria-hidden":"true"}},[e._v("#")]),e._v(" About")]),e._v(" "),a("p",[e._v("User Group Source plugins allow you to add roles to a user when the user logs in.")]),e._v(" "),a("h2",{attrs:{id:"use"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#use","aria-hidden":"true"}},[e._v("#")]),e._v(" Use")]),e._v(" "),a("p",[e._v("Create a user group source plugin and install it like other Rundeck plugins.\nWhen a user logs in, your plugin will be called with the user's username and will add any roles\nyou have designated to the user.")]),e._v(" "),a("h2",{attrs:{id:"configuring"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configuring","aria-hidden":"true"}},[e._v("#")]),e._v(" Configuring")]),e._v(" "),a("p",[e._v("To configure your plugin you can add configuration values to the framework scope.")]),e._v(" "),a("p",[a("em",[e._v("Framework scope property definition in "),a("code",[e._v("framework.properties")])])]),e._v(" "),a("pre",[a("code",[e._v("framework.plugin.UserGroupSource.[your_plugin_name].[property]=value\n")])]),e._v(" "),a("p",[e._v("Please note you cannot configure this plugin at a project level because it executes\nbefore any project information is applicable.")]),e._v(" "),a("h2",{attrs:{id:"java-plugin-type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#java-plugin-type","aria-hidden":"true"}},[e._v("#")]),e._v(" Java Plugin Type")]),e._v(" "),a("div",{staticClass:"language-{.java} extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('package example;\n\nimport com.dtolabs.rundeck.core.plugins.Plugin;\nimport com.dtolabs.rundeck.plugins.ServiceNameConstants;\nimport com.dtolabs.rundeck.plugins.user.groups.UserGroupSourcePlugin;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.Map;\n\n@Plugin(name = "example-user-group-source-plugin",service= ServiceNameConstants.UserGroupSource)\npublic class ExampleUserGroupSourcePlugin implements UserGroupSourcePlugin {\n    List<String> groups = new ArrayList<>();\n\n    public ExampleUserGroupSourcePlugin() {\n        groups.add("RUNDECK_USER"); //This group would get added to all users\n    }\n\n    @Override\n    public List<String> getGroups(final String username, final Map<String, Object> config) {\n        //Check username and add groups from your datasource\n        if(username.equals("bob")) {\n            groups.add("PROJECT_MANAGER");\n        } else if(username.equals("alice")) {\n            groups.add("ENGINEERING");\n        }\n        return groups;\n    }\n}\n')])])]),a("h2",{attrs:{id:"script-plugin-type"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#script-plugin-type","aria-hidden":"true"}},[e._v("#")]),e._v(" Script Plugin Type")]),e._v(" "),a("p",[e._v("Roles will be picked up from the script between the markers "),a("code",[e._v("==START_GROUPS==")]),e._v(" and "),a("code",[e._v("==END_GROUPS==")]),e._v(".\nEcho one role name per line.")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('#!/usr/bin/env bash\n\necho "==START_GROUPS=="\necho "role1"\necho "role2"\necho "==END_GROUPS=="\n\n')])])])])},[],!1,null,null,null);r.default=t.exports}}]);