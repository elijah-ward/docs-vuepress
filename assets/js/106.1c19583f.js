(window.webpackJsonp=window.webpackJsonp||[]).push([[106],{209:function(e,t,i){"use strict";i.r(t);var a=i(0),n=Object(a.a)({},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[i("h1",{attrs:{id:"ui-plugins"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#ui-plugins","aria-hidden":"true"}},[e._v("#")]),e._v(" UI Plugins")]),e._v(" "),i("p",[e._v("Updated December 4, 2017")]),e._v(" "),i("h2",{attrs:{id:"about"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#about","aria-hidden":"true"}},[e._v("#")]),e._v(" About")]),e._v(" "),i("p",[e._v("UI Plugins provide a way to include Javascript and CSS files\nin various parts of the Rundeck GUI's HTML pages.\nYou can define which pages of the GUI should include your plugin files,\nand use the Javascript and CSS to modify or add new features to the GUI.")]),e._v(" "),i("p",[e._v("UI Plugins that are installed are loaded on all applicable pages by default.")]),e._v(" "),i("p",[e._v("UI Plugins can either be packaged as Zip files or Java Jar files.\nThe simplest is to use a Zip plugin type.")]),e._v(" "),i("p",[e._v("Your Javascript can make use if a simple "),i("a",{attrs:{href:"#javascript-api"}},[e._v("Javascript API")]),e._v(" for additional features.")]),e._v(" "),i("h2",{attrs:{id:"behavior"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#behavior","aria-hidden":"true"}},[e._v("#")]),e._v(" Behavior")]),e._v(" "),i("p",[e._v("When Rundeck renders a page, it evaluates whether any UI plugins are applicable, and\nwhat resources of those plugins to load for the page. If some plugins declare that they "),i("code",[e._v("require")]),e._v("\nother plugins, the ordering is arranged to load required plugins first, if possible. Note: any plugin that you put in the "),i("code",[e._v("requires")]),e._v(" section must also be configured to load on the\nsame pages, otherwise Rundeck will not load it.")]),e._v(" "),i("p",[e._v("For Zip UI plugins Rundeck looks at the "),i("code",[e._v("plugin.yaml")]),e._v(" data which declares the page configurations to determine applicability. For Java plugins, Rundeck calls the "),i("code",[e._v("doesApply")]),e._v(" method.")]),e._v(" "),i("p",[e._v("When loading a plugin for the page, Rundeck will link to the script and stylesheets for the\npage. For Zip UI Plugins, the Page configuration determines which scripts and stylesheets\nto load. For Java plugins, the "),i("code",[e._v("scriptResourcesForPath")]),e._v(" and "),i("code",[e._v("styleResourcesForPath")]),e._v(" methods\nwill be called.")]),e._v(" "),i("p",[e._v("This is the list of available pages which can load UI plugins:")]),e._v(" "),i("ul",[i("li",[i("code",[e._v("menu/jobs")]),e._v(",")]),e._v(" "),i("li",[i("code",[e._v("menu/home")])]),e._v(" "),i("li",[i("code",[e._v("menu/projectHome")])]),e._v(" "),i("li",[i("code",[e._v("menu/executionMode")])]),e._v(" "),i("li",[i("code",[e._v("menu/projectExport")])]),e._v(" "),i("li",[i("code",[e._v("menu/projectImport")])]),e._v(" "),i("li",[i("code",[e._v("menu/projectDelete")])]),e._v(" "),i("li",[i("code",[e._v("menu/projectAcls")])]),e._v(" "),i("li",[i("code",[e._v("menu/editProjectAclFile")])]),e._v(" "),i("li",[i("code",[e._v("menu/createProjectAclFile")])]),e._v(" "),i("li",[i("code",[e._v("menu/saveProjectAclFile")])]),e._v(" "),i("li",[i("code",[e._v("menu/logStorage")])]),e._v(" "),i("li",[i("code",[e._v("menu/securityConfig")])]),e._v(" "),i("li",[i("code",[e._v("menu/acls")])]),e._v(" "),i("li",[i("code",[e._v("menu/editSystemAclFile")])]),e._v(" "),i("li",[i("code",[e._v("menu/createSystemAclFile")])]),e._v(" "),i("li",[i("code",[e._v("menu/saveSystemAclFile")])]),e._v(" "),i("li",[i("code",[e._v("menu/systemInfo")])]),e._v(" "),i("li",[i("code",[e._v("menu/systemConfig")])]),e._v(" "),i("li",[i("code",[e._v("menu/metrics")])]),e._v(" "),i("li",[i("code",[e._v("menu/plugins")])]),e._v(" "),i("li",[i("code",[e._v("menu/welcome")])]),e._v(" "),i("li",[i("code",[e._v("menu/storage")])]),e._v(" "),i("li",[i("code",[e._v("scheduledExecution/show")])]),e._v(" "),i("li",[i("code",[e._v("scheduledExecution/edit")])]),e._v(" "),i("li",[i("code",[e._v("scheduledExecution/delete")])]),e._v(" "),i("li",[i("code",[e._v("scheduledExecution/create")])]),e._v(" "),i("li",[i("code",[e._v("execution/show")])]),e._v(" "),i("li",[i("code",[e._v("framework/nodes")])]),e._v(" "),i("li",[i("code",[e._v("framework/adhoc")])]),e._v(" "),i("li",[i("code",[e._v("framework/createProject")])]),e._v(" "),i("li",[i("code",[e._v("framework/editProject")])]),e._v(" "),i("li",[i("code",[e._v("framework/editProjectConfig")])]),e._v(" "),i("li",[i("code",[e._v("framework/editProjectFile")])]),e._v(" "),i("li",[i("code",[e._v("scm/index")])]),e._v(" "),i("li",[i("code",[e._v("reports/index")])])]),e._v(" "),i("h2",{attrs:{id:"zip-plugin-type"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#zip-plugin-type","aria-hidden":"true"}},[e._v("#")]),e._v(" Zip Plugin Type")]),e._v(" "),i("p",[e._v("See the "),i("router-link",{attrs:{to:"/developer/01-plugin-development.html#script-plugin-zip-structure"}},[e._v("Plugin Development - Script plugin zip structure")]),e._v("\nfor the basics of Zip plugin structure.")],1),e._v(" "),i("p",[e._v("The structure of the zip file is:")]),e._v(" "),i("pre",[i("code",[e._v("[name]-plugin.zip\n\\- [name]-plugin/ -- root directory of zip contents, same name as zip file\n   |- plugin.yaml -- plugin metadata file\n   \\- resources/  -- i18n resources, icons, (and for UI plugins: scripts/css)\n   \t  |- icon.png\n      |- i18n/\n      |  |- messages.properties\n      |  |- messages_es_419.properties\n      |  \\- ...\n      |- js/\n      |  |- myfile.js\n      |  \\- ...\n      \\- css/\n         |- mystyles.css\n         \\- ...\n")])]),e._v(" "),i("h3",{attrs:{id:"ui-plugin-provider-declaration"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#ui-plugin-provider-declaration","aria-hidden":"true"}},[e._v("#")]),e._v(" UI Plugin Provider Declaration")]),e._v(" "),i("p",[e._v("The following is required in the "),i("code",[e._v("providers:")]),e._v(" section of the "),i("code",[e._v("plugin.yaml")]),e._v(":")]),e._v(" "),i("div",{staticClass:"language-{.yaml} extra-class"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[e._v("# yaml plugin metadata\n\nname: plugin name\nversion: plugin version\nrundeckPluginVersion: 1.2\nauthor: author name\ndate: release date (ISO8601)\nurl: website URL\nproviders:\n    - service: UI\n      name: my-provider-id\n      plugin-type: ui\n      title: \"My Plugin Title\"\n      description: \"My Plugin Description\"\n      ui:\n        - pages: '*'\n          scripts:\n            - js/my-init.js\n            - js/lib/some-dependency.js\n            - js/lib/my-main.js\n          requires: 'some-other-provider'\n        - pages: ['some/path']\n          styles:\n          \t- css/mystyles.css\n")])])]),i("p",[e._v("For a UI plugin, define a "),i("code",[e._v("service: UI")]),e._v(" and a "),i("code",[e._v("plugin-type: ui")]),e._v(".\n(The "),i("code",[e._v("providers")]),e._v(" section can also define other providers, of any type.)")]),e._v(" "),i("p",[e._v("For "),i("code",[e._v("name:")]),e._v(" use a unique provider ID for your plugin.")]),e._v(" "),i("p",[e._v("Within the "),i("code",[e._v("ui:")]),e._v(" section is a list of UI Plugin Page Configurations.")]),e._v(" "),i("p",[e._v("UI Plugin Page Configurations consist of:")]),e._v(" "),i("ul",[i("li",[i("code",[e._v("pages:")]),e._v(" A list of applicable Page paths. This can be a single path string, a list of paths, or a "),i("code",[e._v("*")]),e._v(" which will match all paths.")]),e._v(" "),i("li",[i("code",[e._v("scripts:")]),e._v(" A single file or list of files. These are relative to the "),i("code",[e._v("resources")]),e._v(" directory in your zip file.")]),e._v(" "),i("li",[i("code",[e._v("styles:")]),e._v(" A single file, or a list of files. Thes are relative to the "),i("code",[e._v("resources")]),e._v(" directory in your zip file.")]),e._v(" "),i("li",[i("code",[e._v("requires:")]),e._v(" A single or list of other UI plugin provider IDs.")])]),e._v(" "),i("p",[e._v("See "),i("a",{attrs:{href:"#javascript-api"}},[e._v("Javascript API")]),e._v(" for additional Javascript information.")]),e._v(" "),i("h3",{attrs:{id:"localization"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#localization","aria-hidden":"true"}},[e._v("#")]),e._v(" Localization")]),e._v(" "),i("p",[e._v("For the basics of zip plugin localization see: [Plugin Development - Internationalization/Localization for Zip files](/developer/01-plugin-development.md#internationalizationlocalization-for-zip-files].")]),e._v(" "),i("h3",{attrs:{id:"icon"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#icon","aria-hidden":"true"}},[e._v("#")]),e._v(" Icon")]),e._v(" "),i("p",[e._v("See [Plugin Icons](/developer/01-plugin-development.md#plugin-icons].")]),e._v(" "),i("h2",{attrs:{id:"java-plugin-type"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#java-plugin-type","aria-hidden":"true"}},[e._v("#")]),e._v(" Java Plugin Type")]),e._v(" "),i("ul",[i("li",[i("em",[e._v("Note")]),e._v(": Refer to [Java Development](/developer/01-plugin-development.md#java-plugin-development] for information about developing a Java plugin for Rundeck.")])]),e._v(" "),i("p",[e._v("The plugin interface is "),i("router-link",{attrs:{to:"/developer/${javadocbase}/com/dtolabs/rundeck/plugins/rundeck/UIPlugin.html"}},[e._v("UIPlugin")]),e._v(".")],1),e._v(" "),i("div",{staticClass:"language-{.java} extra-class"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[e._v("\npublic interface UIPlugin {\n    /**\n     * @param path\n     *\n     * @return true if this plugin applies at the path\n     */\n    boolean doesApply(String path);\n\n    /**\n     *\n     * @param path\n     * @return list of resources available at the path\n     */\n    List<String> resourcesForPath(String path);\n\n    /**\n     * @param path\n     *\n     * @return list of javascript resources to load at the path\n     */\n    List<String> scriptResourcesForPath(String path);\n\n    /**\n     * @param path\n     *\n     * @return list of css stylesheets to load at the path\n     */\n    List<String> styleResourcesForPath(String path);\n\n    /**\n     * @param path\n     *\n     * @return list of plugin names this plugin depends on for the specified path\n     */\n    List<String> requires(String path);\n}\n\n")])])]),i("p",[e._v("The methods of the plugin are used as follows:")]),e._v(" "),i("ul",[i("li",[i("code",[e._v("doesApply")]),e._v(": should return "),i("code",[e._v("true")]),e._v(", if the plugin applies to the given path")]),e._v(" "),i("li",[i("code",[e._v("resourcesForPath")]),e._v(": return the list of resources for the given path")]),e._v(" "),i("li",[i("code",[e._v("scriptResourcesForPath")]),e._v(": return the list of Javascript resources for the path")]),e._v(" "),i("li",[i("code",[e._v("styleResourcesForPath")]),e._v(": return the list of CSS resources for the path")]),e._v(" "),i("li",[i("code",[e._v("requires")]),e._v(": return a list of other UI plugin names which this plugin requires, used to order the loading of plugin resources.")])]),e._v(" "),i("p",[e._v("Resources should be included in your plugin Jar file under a "),i("code",[e._v("resources/")]),e._v(" directory.")]),e._v(" "),i("h3",{attrs:{id:"localization-2"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#localization-2","aria-hidden":"true"}},[e._v("#")]),e._v(" Localization")]),e._v(" "),i("p",[e._v("For the basics of Java plugin localization see: "),i("router-link",{attrs:{to:"/developer/01-plugin-development.html#plugin-localization"}},[e._v("Plugin Development - Plugin Localization")])],1),e._v(" "),i("h3",{attrs:{id:"icon-2"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#icon-2","aria-hidden":"true"}},[e._v("#")]),e._v(" Icon")]),e._v(" "),i("p",[e._v("See [Plugin Icons](/developer/01-plugin-development.md#plugin-icons].")]),e._v(" "),i("h2",{attrs:{id:"javascript-api"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#javascript-api","aria-hidden":"true"}},[e._v("#")]),e._v(" Javascript API")]),e._v(" "),i("p",[e._v("When loaded in a Rundeck GUI page, your Javascript code can use a simple Javascript API to\nget more information about the Rundeck application, and your plugin.")]),e._v(" "),i("p",[e._v("Note: Rundeck makes use of "),i("a",{attrs:{href:"https://knockoutjs.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Knockout"),i("OutboundLink")],1),e._v(" and "),i("a",{attrs:{href:"https://jquery.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("jQuery"),i("OutboundLink")],1),e._v(" on all GUI pages, so they can be used by your plugins. Knockout is useful to understand when interacting with the JS already included on a Rundeck page.")]),e._v(" "),i("p",[e._v("Rundeck creates a window object called "),i("code",[e._v("rundeckPage")]),e._v(" with these methods:")]),e._v(" "),i("ul",[i("li",[i("code",[e._v("project()")]),e._v(": returns the name of the current project, if available")]),e._v(" "),i("li",[i("code",[e._v("path()")]),e._v(": the page path")]),e._v(" "),i("li",[i("code",[e._v("lang()")]),e._v(": current user locale and language code")]),e._v(" "),i("li",[i("code",[e._v("pluginBaseUrl(pluginId)")]),e._v(': returns the base URL for loading file resources for a plugin with provider ID "pluginId". Append a resources path to retrieve any plugin resource files.')]),e._v(" "),i("li",[i("code",[e._v("pluginBasei18nUrl(pluginId)")]),e._v(': returns the base URL for loading i18n resources for a plugin with provider ID "pluginId". Append a resources path to retrieve i18n resources.')])]),e._v(" "),i("p",[e._v("Note: the "),i("code",[e._v("rundeckPage")]),e._v(" object may have other methods, but any methods not documented here are subject to change.")]),e._v(" "),i("h3",{attrs:{id:"loading-resources"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#loading-resources","aria-hidden":"true"}},[e._v("#")]),e._v(" Loading resources")]),e._v(" "),i("p",[e._v("You can load other resources from your plugin by using the "),i("code",[e._v("pluginBaseUrl")]),e._v(" for your plugin.")]),e._v(" "),i("p",[e._v("Example using jQuery:")]),e._v(" "),i("div",{staticClass:"language-{.js} extra-class"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[e._v("function loadHtmlTemplate(file){\n\t//assuming my zip plugin has a resources/html/myfile.html\n\tvar myProvider='com.mycompany.rundeck.myplugin';\n\tvar pluginUrl = rundeckPage.pluginBaseUrl(myProvider);\n    var fullUrl = pluginUrl + '/html/' + file + \".html\";\n    jQuery.get(fullUrl, function (text) {\n    \t//do something with the HTML contents\n    });\n}\n")])])]),i("h3",{attrs:{id:"loading-i18n-resources"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#loading-i18n-resources","aria-hidden":"true"}},[e._v("#")]),e._v(" Loading i18n Resources")]),e._v(" "),i("p",[e._v("The "),i("code",[e._v("rundeckPage.pluginBasei18nUrl(..)")]),e._v(" method will return the base URL for loading i18n resources.")]),e._v(" "),i("p",[e._v("Rundeck Plugin Localization/Internationalization uses java "),i("code",[e._v(".properties")]),e._v(" formatted files. (See "),i("router-link",{attrs:{to:"/developer/01-plugin-development.html#plugin-localization]"}},[e._v("Plugin Localization")]),e._v(". However, your i18n resources don't have to be "),i("code",[e._v(".properties")]),e._v(" files.")],1),e._v(" "),i("p",[e._v("Requesting resources via this URL provides two features to help with i18n:")]),e._v(" "),i("ol",[i("li",[e._v("Locale resolution. Requesting a path such as "),i("code",[e._v("rundeckPage.pluginBasei18nUrl('myprovider')+'/myfile.txt'")]),e._v(", will attempt to resolve the file by looking for a file based on the current User's locale/language settings. E.g. if their language is set to Spanish (code "),i("code",[e._v("es_419")]),e._v("), the request will resolve to a file "),i("code",[e._v("i18n/myfile_es_419.txt")]),e._v(" if it exists. It will fall back to the language (e.g. "),i("code",[e._v("es")]),e._v("), then any default locale (e.g. "),i("code",[e._v("en_us")]),e._v("), default language (e.g. "),i("code",[e._v("en")]),e._v(") and finally the original file path.")]),e._v(" "),i("li",[e._v("Conversion of Java .properties to JSON. If you request a "),i("code",[e._v(".properties")]),e._v(" file, and append a "),i("code",[e._v("?format=json")]),e._v(" to the URL, Rundeck will load the Java Properties formatted data, and return the JSON for the data.")])]),e._v(" "),i("p",[e._v("Examples:")]),e._v(" "),i("p",[e._v("Loads plugin i18n messages into the "),i("code",[e._v("window.Messages")]),e._v(" object.\nIf my zip plugin has a file "),i("code",[e._v("resources/i18n/messages_es_419.properties")]),e._v("\nand user's current lang is "),i("code",[e._v("es_419")]),e._v(", this would load the Spanish messages:")]),e._v(" "),i("div",{staticClass:"language-{.js} extra-class"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[e._v("function loadi18nMessages(file){\n\tvar myProvider='com.mycompany.rundeck.myplugin';\n\tvar plugini18nBase = rundeckPage.pluginBasei18nUrl(myProvider);\n    jQuery.ajax({\n        url: plugini18nBase + '/messages.properties?format=json',\n        success: function (data) {\n            if (typeof(window.Messages) != 'object') {\n                window.Messages = {};\n            }\n            jQuery.extend(window.Messages, data);\n        }\n    });\n}\n")])])]),i("p",[e._v("This example is similar to the first example, but loads a HTML file specific to the Language/Locale of the user. If the locale is "),i("code",[e._v("es_419")]),e._v(" this would load the "),i("code",[e._v("resources/i18n/html/myfile_es_419.html")]),e._v(" file:")]),e._v(" "),i("div",{staticClass:"language-{.js} extra-class"},[i("pre",{pre:!0,attrs:{class:"language-text"}},[i("code",[e._v("\nfunction loadi18nHtmlTemplate(file){\n\tvar myProvider='com.mycompany.rundeck.myplugin';\n\tvar plugini18nBase = rundeckPage.pluginBasei18nUrl(myProvider);\n    var fullUrl = plugini18nBase + '/html/' + file + \".html\";\n    jQuery.get(fullUrl, function (text) {\n    \t//do something with the HTML contents\n    });\n}\n")])])]),i("h2",{attrs:{id:"example-plugin"}},[i("a",{staticClass:"header-anchor",attrs:{href:"#example-plugin","aria-hidden":"true"}},[e._v("#")]),e._v(" Example Plugin")]),e._v(" "),i("p",[e._v("Here are some "),i("a",{attrs:{href:"https://github.com/rundeck-plugins/ui-plugin-examples/",target:"_blank",rel:"noopener noreferrer"}},[e._v("UI Plugin Examples"),i("OutboundLink")],1),e._v(".")])])},[],!1,null,null,null);t.default=n.exports}}]);