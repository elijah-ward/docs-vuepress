(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{216:function(e,t,r){"use strict";r.r(t);var i=r(0),a=Object(i.a)({},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"repository"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#repository","aria-hidden":"true"}},[e._v("#")]),e._v(" Repository")]),e._v(" "),r("p",[e._v('This document describes the Rundeck Repository features, which allow you to install plugins from the official Rundeck Repository, or to configure your own repositories for serving plugins to your own private installation.\nYou can use the repositories to find plugins using the "Find Plugins" entry under the Plugins menu that is accessed from the gear icon in the GUI. You can also use the '),r("code",[e._v("rd")]),e._v(" tool to install, uninstall, and upload plugins that are saved in these repositories.")]),e._v(" "),r("h3",{attrs:{id:"prerequisites"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#prerequisites","aria-hidden":"true"}},[e._v("#")]),e._v(" Prerequisites")]),e._v(" "),r("p",[e._v("In order to use the official Rundeck Repository your Rundeck server must be allowed to connect to the internet and to access "),r("code",[e._v("https://api.rundeck.com")]),e._v(" based urls.\nIf you do not wish to allow your Rundeck server to reach the internet you can still use the private repository features, but the official Rundeck repository will be unavailable to you, and should be disabled.")]),e._v(" "),r("h2",{attrs:{id:"enabling-the-repository-feature"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#enabling-the-repository-feature","aria-hidden":"true"}},[e._v("#")]),e._v(" Enabling the Repository feature")]),e._v(" "),r("p",[e._v("To enable the repositories. Add the flag:")]),e._v(" "),r("p",[r("code",[e._v("rundeck.feature.repository.enabled=true")])]),e._v(" "),r("p",[e._v("to your rundeck-config.properties file.")]),e._v(" "),r("h2",{attrs:{id:"gui-usage"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#gui-usage","aria-hidden":"true"}},[e._v("#")]),e._v(" GUI Usage")]),e._v(" "),r("p",[e._v("Each repository that is enabled will show up in the Rundeck user interface when you click the gear icon then go to Plugins>Find Plugin.\n"),r("img",{attrs:{src:"/figures/plugins-find.png",alt:"Find Plugins"}})]),e._v(" "),r("p",[e._v("When you go to the plugin page you will see each repository and the plugins they provide.")]),e._v(" "),r("p",[e._v("The plugins are each represented by a card. The following image explains the content of the plugin card.\n"),r("img",{attrs:{src:"/figures/plugin-card.png",alt:"Plugin Card"}}),e._v("{ width=35% }")]),e._v(" "),r("p",[e._v("If you have the official repository enabled you will see some plugins with an install button. These plugins can be immediately installed by clicking the "),r("code",[e._v("Install")]),e._v(" button. When the plugin is installed, it will be pulled from the Rundeck repository and copied into the correct location in your Rundeck installation. After installation, it is ready for immediate use. Some plugins do not have an install button. Manual installation is required for those plugins. To install those plugins you need to click on the source link icon "),r("img",{attrs:{src:"/figures/repo-source-icon.png",alt:"source link icon"}}),e._v(", which will take you to the plugins source page, and there you can check for instructions regarding the install of that plugin.")]),e._v(" "),r("p",[e._v("Installable plugins are also un-installable. Just click the "),r("code",[e._v("Uninstall")]),e._v(" button to uninstall the plugin. This will delete the plugin from the correct location immediately.")]),e._v(" "),r("p",[e._v("All plugins that you add to your private repository are installable and un-installable from the GUI.")]),e._v(" "),r("h2",{attrs:{id:"configuration"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#configuration","aria-hidden":"true"}},[e._v("#")]),e._v(" Configuration")]),e._v(" "),r("p",[e._v("When you enable the Rundeck Repository the following default files and directories are created for you:")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("RDECK_BASE/server/config/artifcat-repositories.yaml")]),e._v(" - Repositories are configured in this file.")]),e._v(" "),r("li",[r("code",[e._v("RDECK_BASE/repository/artifacts")]),e._v(" - The directory into which your private plugins will be copied when you use the "),r("code",[e._v("upload")]),e._v(" command to build your private plugin repository.")]),e._v(" "),r("li",[r("code",[e._v("RDECK_BASE/repository/installedPlugins")]),e._v(" - The directory into which plugins will be copied when you use install them either from the offical Rundeck repository or your private repository.")])]),e._v(" "),r("p",[e._v("Both the "),r("code",[e._v("artifacts")]),e._v(" and "),r("code",[e._v("installedPlugins")]),e._v(" locations are configurable using the storage tree mechanism.")]),e._v(" "),r("h3",{attrs:{id:"installed-plugin-storage"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#installed-plugin-storage","aria-hidden":"true"}},[e._v("#")]),e._v(" Installed Plugin Storage")]),e._v(" "),r("p",[e._v("When you install a plugin from a repository into your Rundeck instance, the plugin will be copied into the "),r("code",[e._v("libext")]),e._v(" folder as usual. The plugin will also be copied to a location\nthat you can configure using the storage tree mechanism. Optionally, the location can be a central location all of your Rundeck instances share which can keep the plugins they have installed in sync.\nYou can only have one location specified for storing installed plugins.")]),e._v(" "),r("p",[e._v("The following examples show how to configure the installed plugin location:")]),e._v(" "),r("h5",{attrs:{id:"save-installed-plugins-to-your-local-filesystem-at-the-location-opt-repository-installedplugins"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#save-installed-plugins-to-your-local-filesystem-at-the-location-opt-repository-installedplugins","aria-hidden":"true"}},[e._v("#")]),e._v(" Save installed plugins to your local filesystem at the location: /opt/repository/installedPlugins")]),e._v(" "),r("p",[r("code",[e._v("rundeck-config.properties")])]),e._v(" "),r("div",{staticClass:"language-{.properties} extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("rundeck.repository.plugins.provider.1.type=file\nrundeck.repository.plugins.provider.1.path=/\nrundeck.repository.plugins.provider.1.config.baseDir=/opt/repository/installedPlugins\n")])])]),r("h5",{attrs:{id:"save-installed-plugins-to-your-local-filesystem-at-the-location-opt-repository-content-installedplugins"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#save-installed-plugins-to-your-local-filesystem-at-the-location-opt-repository-content-installedplugins","aria-hidden":"true"}},[e._v("#")]),e._v(" Save installed plugins to your local filesystem at the location: /opt/repository/content/installedPlugins")]),e._v(" "),r("p",[r("code",[e._v("rundeck-config.properties")])]),e._v(" "),r("div",{staticClass:"language-{.properties} extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("rundeck.repository.plugins.provider.1.type=file\n#This must match the storageTreePath below\nrundeck.repository.plugins.provider.1.path=/installedPlugins\nrundeck.repository.plugins.provider.1.config.baseDir=/opt/repository\n\n#Must match the path previously specified in the storage tree configuration\nrundeck.feature.repository.installedPlugins.storageTreePath=/installedPlugins\n")])])]),r("p",[e._v("Note: In the example above the storage tree path was not the default '/' root location, therefore the extra property:\n"),r("code",[e._v("rundeck.feature.repository.installedPlugins.storageTreePath")]),e._v(" was required. This property is not required if the '/' default root is used.")]),e._v(" "),r("h5",{attrs:{id:"save-installed-plugins-to-a-minio-object-store"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#save-installed-plugins-to-a-minio-object-store","aria-hidden":"true"}},[e._v("#")]),e._v(" Save installed plugins to a Minio object store")]),e._v(" "),r("p",[r("code",[e._v("rundeck-config.properties")])]),e._v(" "),r("div",{staticClass:"language-{.properties} extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("rundeck.repository.plugins.provider.1.type=object\nrundeck.repository.plugins.provider.1.path=/\nrundeck.repository.plugins.provider.1.config.bucket=repository\nrundeck.repository.plugins.provider.1.config.objectStoreUrl=http://your-minio-server:9000\nrundeck.repository.plugins.provider.1.config.secretKey=YOUR_SECRET_KEY\nrundeck.repository.plugins.provider.1.config.accessKey=YOUR_ACCESS_KEY\n")])])]),r("h5",{attrs:{id:"save-installed-plugins-to-a-minio-object-store-for-cluster-where-all-members-sync-their-plugins-on-bootstrap"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#save-installed-plugins-to-a-minio-object-store-for-cluster-where-all-members-sync-their-plugins-on-bootstrap","aria-hidden":"true"}},[e._v("#")]),e._v(" Save installed plugins to a Minio object store for cluster where all members sync their plugins on bootstrap")]),e._v(" "),r("p",[r("code",[e._v("rundeck-config.properties")])]),e._v(" "),r("div",{staticClass:"language-{.properties} extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("rundeck.repository.plugins.provider.1.type=object\nrundeck.repository.plugins.provider.1.path=/\nrundeck.repository.plugins.provider.1.config.bucket=repository\nrundeck.repository.plugins.provider.1.config.objectStoreUrl=http://your-minio-server:9000\nrundeck.repository.plugins.provider.1.config.secretKey=YOUR_SECRET_KEY\nrundeck.repository.plugins.provider.1.config.accessKey=YOUR_ACCESS_KEY\n#Set this property so that the object store directory will not be cached on the Rundeck instance\n#rundeck.repository.artifacts.provider.1.config.uncachedObjectLookup=true\n#This cluster member will pull it's plugins from the installed plugin location and install them when it bootstraps\nrundeck.feature.repository.syncOnBootstrap=true\n")])])]),r("h3",{attrs:{id:"repositories"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#repositories","aria-hidden":"true"}},[e._v("#")]),e._v(" Repositories")]),e._v(" "),r("p",[e._v("Repositories are locations that store plugin jar and zip files that may be installed into a Rundeck instance.")]),e._v(" "),r("p",[e._v("Here are some examples for various configurations of private artifact repositories.")]),e._v(" "),r("h4",{attrs:{id:"filesystem"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#filesystem","aria-hidden":"true"}},[e._v("#")]),e._v(" Filesystem")]),e._v(" "),r("h5",{attrs:{id:"save-private-repository-plugin-artifacts-to-your-local-filesystem-at-the-location-opt-repository-content-artifacts"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#save-private-repository-plugin-artifacts-to-your-local-filesystem-at-the-location-opt-repository-content-artifacts","aria-hidden":"true"}},[e._v("#")]),e._v(" Save private repository plugin artifacts to your local filesystem at the location: /opt/repository/content/artifacts")]),e._v(" "),r("p",[r("code",[e._v("rundeck-config.properties")])]),e._v(" "),r("div",{staticClass:"language-{.properties} extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("rundeck.repository.artifacts.provider.1.type=file\nrundeck.repository.artifacts.provider.1.path=/artifacts\nrundeck.repository.artifacts.provider.1.config.baseDir=/opt/repository\n")])])]),r("p",[r("code",[e._v("artifact-repositories.yaml")])]),e._v(" "),r("div",{staticClass:"language-{.yaml} extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("-   repositoryName: Private\n    type: STORAGE_TREE\n    configProperties:\n        storageTreePath: /artifacts\n")])])]),r("h4",{attrs:{id:"object-store"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#object-store","aria-hidden":"true"}},[e._v("#")]),e._v(" Object Store")]),e._v(" "),r("h5",{attrs:{id:"save-private-repository-plugin-artifacts-to-a-minio-object-store"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#save-private-repository-plugin-artifacts-to-a-minio-object-store","aria-hidden":"true"}},[e._v("#")]),e._v(" Save private repository plugin artifacts to a minio object store")]),e._v(" "),r("p",[r("code",[e._v("rundeck-config.properties")])]),e._v(" "),r("div",{staticClass:"language-{.properties} extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("rundeck.repository.artifacts.provider.1.type=object\nrundeck.repository.artifacts.provider.1.path=/minio\nrundeck.repository.artifacts.provider.1.config.bucket=repository\nrundeck.repository.artifacts.provider.1.config.objectStoreUrl=http://your-minio-server:9000\nrundeck.repository.artifacts.provider.1.config.secretKey=YOUR_SECRET_KEY\nrundeck.repository.artifacts.provider.1.config.accessKey=YOUR_ACCESS_KEY\n")])])]),r("p",[r("code",[e._v("artifact-repositories.yaml")])]),e._v(" "),r("div",{staticClass:"language-{.yaml} extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("-   repositoryName: MinioRepo\n    type: STORAGE_TREE\n    configProperties:\n        storageTreePath: /minio\n")])])]),r("h5",{attrs:{id:"use-a-file-store-for-one-repo-and-an-object-store-for-another"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#use-a-file-store-for-one-repo-and-an-object-store-for-another","aria-hidden":"true"}},[e._v("#")]),e._v(" Use a file store for one repo and an object store for another")]),e._v(" "),r("p",[r("code",[e._v("rundeck-config.properties")])]),e._v(" "),r("div",{staticClass:"language-{.properties} extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("rundeck.repository.artifacts.provider.1.type=file\nrundeck.repository.artifacts.provider.1.path=/repo1\nrundeck.repository.artifacts.provider.1.config.baseDir=/opt/repository\n\nrundeck.repository.artifacts.provider.2.type=object\nrundeck.repository.artifacts.provider.2.path=/minio\nrundeck.repository.artifacts.provider.2.config.bucket=repository\nrundeck.repository.artifacts.provider.2.config.objectStoreUrl=http://your-minio-server:9000\nrundeck.repository.artifacts.provider.2.config.secretKey=YOUR_SECRET_KEY\nrundeck.repository.artifacts.provider.2.config.accessKey=YOUR_ACCESS_KEY\n")])])]),r("p",[r("code",[e._v("artifact-repositories.yaml")])]),e._v(" "),r("div",{staticClass:"language-{.yaml} extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("-   repositoryName: Repo1\n    type: STORAGE_TREE\n    configProperties:\n        storageTreePath: /repo1\n-   repositoryName: Repo2\n    type: STORAGE_TREE\n    configProperties:\n        storageTreePath: /minio\n")])])]),r("h3",{attrs:{id:"using-the-repositories-with-the-rd-tool"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#using-the-repositories-with-the-rd-tool","aria-hidden":"true"}},[e._v("#")]),e._v(" Using the repositories with the "),r("code",[e._v("rd")]),e._v(" tool")]),e._v(" "),r("p",[e._v("The "),r("code",[e._v("rd")]),e._v(" tool can be used to list plugins, install plugins from a repository, upload to a private repository, and uninstall plugins.")]),e._v(" "),r("h4",{attrs:{id:"list-plugins"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#list-plugins","aria-hidden":"true"}},[e._v("#")]),e._v(" List Plugins")]),e._v(" "),r("p",[r("code",[e._v("rd plugins")])]),e._v(" "),r("div",{staticClass:"language-{.bash} extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("==Official Repository==\n2e51ce08c836 : rundeck-http-workflow-step-plugin : 1.0.11 (not installed)\ndef44eeac568 : nixy-local-steps : v1.2.6 (installed)\nee1e33e004e0 : nixy-file : v1.2.6 (not installed)\n681c33f5c3fd : openssh-bastion-host : 1.0.0 (installed)\n86177619503e : slack-notification-plugin : 1.2.6 (not installed)\n1d56241b6d14 : rundeck-azure-storage-plugin : 1.0.0 (not installed)\n5c3a72ab196c : http-notification-plugin : 0.1.0-SNAPSHOT (installed)  (Updateable to 1.0.5)\n452e4837ebb6 : jira-notification-2 : 1.0.1 (not installed)\n15712f2421d1 : kubernetes-plugin-2 : 1.0.0 (installed)  (Updatable to 1.0.12)\n59ed572534b2 : py-winrm-plugin : 1.0.7 (installed)  (Updateable to 2.0.1)\n01a78578d6d9 : hashicorp-vault : 1.3.0 (installed)\nd8a7e2981805 : s3-log-storage-plugin : 1.0.7 (installed)\nd4338c89f3f6 : nixy-step-plugin-waitfor : v1.2.6 (not installed)\n904beafe241b : aws-s3-step-plugin : 1.2.1 (installed)\n765bd99fd03b : puppet-apply-step : 1.0 (installed)\nf39ba031afe7 : rundeckansible : 3.0.1 (not installed)\n7b324410cef0 : rundeck-ec2-nodes-plugin : 1.5.10 (not installed)\n01a78578d6d9 : vault-storage : 1.3.0 (installed)\n36cc72f36df7 : jq-json-log-filter : 1.0.2 (not installed)\n3eb57b31591f : rundeck-winrm : 1.3.5 (installed)\n55e70e8b52d7 : rundeck-rainbow : 0.1.2 (installed)\n681c33f5c3fd : openssh-bastion-host-node-execution : 1.0.0 (installed)\n904beafe241b : aws-cli-plugin : 1.2.1 (installed)\nac67623a4999 : pagerduty-notification : 1.2.1 (not installed)\nfa61f23b7a1c : jira-workflow-step : 1.0.1 (not installed)\n==Private Repository==\n01843c9fbe3d : Icon Nodes Enhancer : 0.1.4-SNAPSHOT (not installed)\n")])])]),r("h4",{attrs:{id:"install-plugin"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#install-plugin","aria-hidden":"true"}},[e._v("#")]),e._v(" Install Plugin")]),e._v(" "),r("p",[e._v("This would install the Icon Node Enhancer plugin listed previously")]),e._v(" "),r("p",[r("code",[e._v("rd plugins install -r Private -i 01843c9fbe3d")])]),e._v(" "),r("div",{staticClass:"language-{.bash} extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("Plugin Installed\n")])])]),r("h4",{attrs:{id:"uninstall-plugin"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#uninstall-plugin","aria-hidden":"true"}},[e._v("#")]),e._v(" Uninstall Plugin")]),e._v(" "),r("p",[e._v("This would uninstall the Icon Node Enhancer plugin that was previously installed")]),e._v(" "),r("p",[r("code",[e._v("rd plugins uninstall -i 01843c9fbe3d")])]),e._v(" "),r("div",{staticClass:"language-{.bash} extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("Plugin Uninstalled\n")])])]),r("h4",{attrs:{id:"upload-plugin"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#upload-plugin","aria-hidden":"true"}},[e._v("#")]),e._v(" Upload Plugin")]),e._v(" "),r("p",[e._v("To upload a plugin into your private plugin repository execute:")]),e._v(" "),r("p",[r("code",[e._v("rd plugins upload -r Private -f /path/to/your/plugin.jar")])]),e._v(" "),r("p",[e._v("or")]),e._v(" "),r("p",[r("code",[e._v("rd plugins upload -r Private -f /path/to/your/plugin.zip")])]),e._v(" "),r("p",[e._v("which will give you the message:")]),e._v(" "),r("div",{staticClass:"language-{.bash} extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("Upload succeeded\n")])])]),r("p",[e._v("At this time only java and script plugin types are uploadable into a repository")]),e._v(" "),r("h3",{attrs:{id:"how-to-disable-a-repository"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#how-to-disable-a-repository","aria-hidden":"true"}},[e._v("#")]),e._v(" How to disable a repository")]),e._v(" "),r("p",[e._v("If you need to disable a repository for some reason, but would like to retain the entry in your\n"),r("code",[e._v("artifact-repositories.yaml")]),e._v(" file, you can add an "),r("code",[e._v("enabled: false")]),e._v(" property to the repository\nentry and it will be disabled. Once disabled, the repository will no longer show up in the Find Plugins GUI or\nwhen using the "),r("code",[e._v("rd")]),e._v(" tool.")]),e._v(" "),r("p",[e._v("Example:")]),e._v(" "),r("div",{staticClass:"language-{.yaml} extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("-   repositoryName: Private\n    enabled: false\n    type: STORAGE_TREE\n    configProperties:\n        storageTreePath: /artifacts\n")])])])])},[],!1,null,null,null);t.default=a.exports}}]);